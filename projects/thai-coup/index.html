---
layout: default
title: Thai Coup
---

<style>

  #tiles img {
    max-width: 400px;
  }

  .credit {
    text-align: right;
    padding-right: 3px;
    padding-top: 2px;
    font-style: italic;
    color: #999;
  }

  .item {
    background-color: rgb(239, 239, 239);
    padding: 3px;
    margin-bottom: 20px;
  }

  .item.text {
    background-color: white;
    font-size: 22px;
  }

  .text p.body-text {
    quotes: "“" "”" "‘" "’";
    max-width: 400px;
  }
  .text p.body-text:before {
      content: open-quote;
  }
  .text p.body-text:after {
      content: close-quote;
  }
 
</style>

<link rel="stylesheet" href="/projects/syria-tracker/nv.d3.min.css">

<div class="header-wrap header-wrap-short"><div class="header">
{% include nav.html %}
</div></div>

<div class="row content text-content">
  <div class="col-md-9">
    <h2>Thai Coup Snapshot</h2>
    <p>Social media snapshot of this week's military coup in Thailand.</p>
  </div>
</div>

<hr>

<div class="row" style="padding-left:25px;">
  <div id="tiles"></div>
</div>

<script src="http://cdnjs.cloudflare.com/ajax/libs/masonry/3.1.2/masonry.pkgd.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.6.0/moment.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/3.0.4/jquery.imagesloaded.min.js"></script>

<script>

window.doOnLoad = function() {
  $.ajax({
    url: 'http://devapi.crisis.net/item?placeName=thailand&limit=100',
    dataType: "json",
    beforeSend: function(xhr) {
      xhr.setRequestHeader('Authorization', 'Bearer 532d32c7ed3329652f114b70');
    },
    success: function (data) {
      setTiles(data.data);
    }
  });
};

var setTiles = function(items) {
  var $tiles = $('#tiles');
  $.each(items, function(idx, item) {
    var $item = $('<div>', { 'class': 'item ' + item.source });

    var fromURL;

    if(item.source === "twitter" && item.author) {
      fromURL = "http://twitter.com/" + item.author.username + "/status/" + item.remoteID;
    }
    else {
      fromURL = item.fromURL;
    }

    var $a = $('<a>', { href: fromURL });
    var $body;

    if(item.image) {
      var $img = $('<img>', { src: item.image });
      $a.append($img);
      $body = $a; 
    }
    else {
      $item.addClass('text');
      $body = $('<p>', {'class': 'body-text'});
      var text = item.summary || item.content;
      $a.text(text.substring(0,150));
      $body.append($a);
    }

    var creditText;
    if(item.author) {
      creditText = item.author.username + " on " + item.source;
    }
    else {
      creditText = item.source;
    }
    $credit = $('<p>', { 'class': 'credit', text: creditText });

    $item.append($body);
    $item.append($credit);

    $tiles.append($item);

  });
  
  imagesLoaded( '#tiles', function() {
    var container = document.querySelector('#tiles');
    var msnry = new Masonry( container, {
      itemSelector: '.item',
      columnWidth: 200,
      gutter: 5
    });
  });
};

</script>